<div class="ev-main-container">
  <header>
    <div class="ev-taskbar-container">
      <div class="ev-taskbar-left-container">
        <button mat-icon-button (click)="onBack()" type="button"><mat-icon aria-label="Retour" class="ev-button-left">navigate_before</mat-icon></button>
        <button mat-raised-button color="primary" class="ev-button-left" type="button" (click)="onSave()" form="MyForm" [disabled]="form.invalid">{{applicationUserContext.getCulturedRessourceText(701)}}</button>
      </div>
    </div>
  </header>
  <form id="MyForm" [formGroup]="form" class="ev-horizontal-container">
    <div class="boxNormalSize">
      <table class="cadre_primary">
        <tr>
          <td class="cadre_header_primary">
            {{applicationUserContext.getCulturedRessourceText(722)}}
          </td>
        </tr>
        <tr>
          <td class="cadre_body">
            <mat-form-field style="width:100%;">
              <mat-label>{{applicationUserContext.getCulturedRessourceText(722)}}</mat-label>
              <mat-select formControlName="DocumentEditTypeList" (selectionChange)="manageScreen();"
                          required [errorStateMatcher]="matcher">
                <mat-option *ngFor="let documentEditType of documentEditTypeList" [value]="documentEditType.t">{{documentEditType.name}}</mat-option>
              </mat-select>
              <mat-error align="end" *ngIf="(form.get('DocumentEditTypeList').touched || form.get('DocumentEditTypeList').dirty) && form.get('DocumentEditTypeList').errors?.required">{{applicationUserContext.getCulturedRessourceText(293)}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width:100%;"
                            *ngIf="form.get('DocumentEditTypeList').value==='EtatTrimerstrielCollectiviteCS'
                              || form.get('DocumentEditTypeList').value==='EtatMensuelCollectiviteHCS'
                              || form.get('DocumentEditTypeList').value==='CertificatRecyclageCS'
                              || form.get('DocumentEditTypeList').value==='CertificatRecyclageHCS'">
              <mat-label>{{applicationUserContext.getCulturedRessourceText(316)}}</mat-label>
              <mat-select formControlName="CollectiviteList"
                          multiple [compareWith]="compareFnCollectivite">
                <mat-option>
                  <ngx-mat-select-search formControlName="CollectiviteListFilter" placeholderLabel={{applicationUserContext.getCulturedRessourceText(440)}}
                                         noEntriesFoundLabel={{applicationUserContext.getCulturedRessourceText(730)}}></ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let collectivite of filteredCollectiviteList | async" [value]="collectivite">{{collectivite.Libelle}}</mat-option>
              </mat-select>
              <mat-error align="end" *ngIf="(form.get('CollectiviteList').touched || form.get('CollectiviteList').dirty) && form.get('CollectiviteList').errors?.required">{{applicationUserContext.getCulturedRessourceText(293)}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width:100%;" *ngIf="form.get('DocumentEditTypeList').value==='EtatMensuelReception'">
              <mat-label>{{applicationUserContext.getCulturedRessourceText(315)}}</mat-label>
              <mat-select formControlName="CentreDeTriList"
                          multiple [compareWith]="compareFnCentreDeTri">
                <mat-option>
                  <ngx-mat-select-search formControlName="CentreDeTriListFilter" placeholderLabel={{applicationUserContext.getCulturedRessourceText(440)}}
                                         noEntriesFoundLabel={{applicationUserContext.getCulturedRessourceText(730)}}></ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let centreDeTri of filteredCentreDeTriList | async" [value]="centreDeTri">{{centreDeTri.Libelle}}</mat-option>
              </mat-select>
              <mat-error align="end" *ngIf="(form.get('CentreDeTriList').touched || form.get('CentreDeTriList').dirty) && form.get('CentreDeTriList').errors?.required">{{applicationUserContext.getCulturedRessourceText(293)}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width:100%;"
                            *ngIf="form.get('DocumentEditTypeList').value==='EtatMensuelReception'
                              || form.get('DocumentEditTypeList').value==='EtatMensuelCollectiviteHCS'">
              <mat-label>{{applicationUserContext.getCulturedRessourceText(571)}}</mat-label>
              <mat-select formControlName="MonthList"
                          required [errorStateMatcher]="matcher">
                <mat-option *ngFor="let month of monthList" [value]="month.d">{{month.name}}</mat-option>
              </mat-select>
              <mat-error align="end" *ngIf="(form.get('MonthList').touched || form.get('MonthList').dirty) && form.get('MonthList').errors?.required">{{applicationUserContext.getCulturedRessourceText(293)}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width:100%;"
                            *ngIf="form.get('DocumentEditTypeList').value==='EtatTrimerstrielCollectiviteCS'
                              || form.get('DocumentEditTypeList').value==='CertificatRecyclageCS'
                              || form.get('DocumentEditTypeList').value==='CertificatRecyclageHCS'">
              <mat-label>{{applicationUserContext.getCulturedRessourceText(696)}}</mat-label>
              <mat-select formControlName="QuarterList"
                          required [errorStateMatcher]="matcher">
                <mat-option *ngFor="let quarter of quarterList" [value]="quarter.n">{{quarter.name}}</mat-option>
              </mat-select>
              <mat-error align="end" *ngIf="(form.get('QuarterList').touched || form.get('QuarterList').dirty) && form.get('QuarterList').errors?.required">{{applicationUserContext.getCulturedRessourceText(293)}}</mat-error>
            </mat-form-field>
            <mat-form-field style="width:100%;">
              <mat-label>{{applicationUserContext.getCulturedRessourceText(569)}}</mat-label>
              <mat-select formControlName="YearList"
                          required [errorStateMatcher]="matcher">
                <mat-option *ngFor="let year of yearList" [value]="year.y">{{year.y}}</mat-option>
              </mat-select>
              <mat-error align="end" *ngIf="(form.get('YearList').touched || form.get('YearList').dirty) && form.get('YearList').errors?.required">{{applicationUserContext.getCulturedRessourceText(293)}}</mat-error>
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>
  </form>
  <footer class="ev-footer"></footer>
</div>
<progress-bar [color]="color" [mode]="mode" [value]="value" [backdropEnabled]="true"
              [displayProgressBar]="displayProgressBar" position="GloballyTop">
</progress-bar>
